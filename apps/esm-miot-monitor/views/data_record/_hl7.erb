<%
	
r = DataRecord.find params[:id]
d = JSON.parse r.data
admit = Admit.find r.admit_id
patient = Patient.find admit.patient_id
%>
MSH|^~\&|MachineName|CompanyName|SmartOPD|<%=d['device_id']%>|||ORU^R01|2701|P|2.3
PID|1|<%=patient.hn if patient%>||
PV1||O|||||||||||||||||<%=Time.now.strftime("%Y%m%d%H%M%S")%>
OBR|1|||||<%=r.stamp.strftime("%Y%m%d%H%M%S")%>||||||||<%=r.stamp.strftime("%Y%m%d%H%M%S")%>
OBX|1|ST|WEIGHT||<%=r.weight%>|KG.|||||F|||<%=r.stamp.strftime("%Y%m%d%H%M%S")%>|CN-0MlUKDFB-5214D25
OBX|2|ST|HEIGHT||<%=r.height%>|CM.|||||F|||<%=r.stamp.strftime("%Y%m%d%H%M%S")%>|CN-0MlUKDFB-5214D25
OBX|3|ST|BMI||<%=r.bmi%>| Kg/m2|||||F|||<%=r.stamp.strftime("%Y%m%d%H%M%S")%>|CN-0MlUKDFB-5214D25
OBX|4|ST|TEMP||<%=r.temp%>|C|||||F|||<%=r.stamp.strftime("%Y%m%d%H%M%S")%>|HAG-WER34539LH-HBDG235-ND
OBX|5|ST|SYSTOLIC||<%=r.bp_sys%>|mmHg|||||F|||<%=r.stamp.strftime("%Y%m%d%H%M%S")%>|PO-865JDFG-637HFB-9908
OBX|6|ST|DIASTOLIC||<%=r.bp_dia%>|mmHg|||||F|||<%=r.stamp.strftime("%Y%m%d%H%M%S")%>|PO-865JDFG-637HFB-9908
OBX|7|ST|RR||<%=r.rr%>|RM|||||F|||<%=r.stamp.strftime("%Y%m%d%H%M%S")%>||PO-865JDFG-637HFB-9908
OBX|8|ST|PULSE||<%=r.pr%>|bpm|||||F|||<%=r.stamp.strftime("%Y%m%d%H%M%S")%>|PO-865JDFG-637HFB-9908
OBX|9|ST|HEARTRATE||<%=r.hr%>|HRM|||||F|||<%=r.stamp.strftime("%Y%m%d%H%M%S")%>|PO-865JDFG-637HFB-9908
OBX|10|ST|DTX|1|<%=r.glucose%>|mg/DL|||||F|||<%=r.stamp.strftime("%Y%m%d%H%M%S")%>|PO-865JDFG-637HFB-9908
